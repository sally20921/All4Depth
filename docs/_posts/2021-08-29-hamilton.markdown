---
layout: post
title:  "3D Rotations and Hamilton's Quarternions"
date:   2021-08-26 06:24:18 +0900
categories: vision
---

# 3D Rotations and Hamilton's Quarternions
* With the Euler Angles, the foundations for the calculation of the rotation of bodies in three-dimensional spaces were found. However, it was later discovered that Hamilton's Quarternion's are a more efficient tool for studying the rotation mode of bodies. In this article, we will see what Quarternions are, how they are calculated and how they apply to the rotation of a body.

## Hamilton's Quarternions
Quarternions were devised by the mathematician Hamilton to extend the functionality of complex numbers into a four-dimensional system.

Complex numbers are generally denoted by the notation $z= a+bi$ where $a$ is the real part, $b$ is the imaginary component while $i$ is the imaginary unit defined as the square root of -1. Quarternions extend the concept of complex numbers, and then two more $-1$ symbols are added. $q = w+xi+yj+zk$ where $w$ is the real part, $i,j,k$ denotes the three imaginary units, and $x,y,z$ denote the three imaginary components. To make things simpler you can just write $q = w+v$ where $w$ is the scalar component and $v=(x,y,z)$ is the vector of the imaginary components. 

## The Algebra of Quarternions
Given two quarternions $q_1$ and $q_2$, the sum of the two quarternions is defined as follows: $$q_1+q_2 = (w_1+w_2) + (x_1+x_2)i + (y_1+y_2)j + (z_1+z_2)k $$ while the product of two quarternions takes place in this way: $$q_1 q_2 = w_1 w_2 - v_1 v_2 + w_1 v_2 + w_2 v_1 + v1 \times v_2 $$ where $v_1 \cdot v_2$ is the scalar product and $v_1 \times v_2$ is the vector product. 

Other important definitions for quarternion algebra are the conjugate, the norm and the inverse of a quarternion. The conjugate of a quarternion is denoted by $q*$ and is defined as $$q* = w -xi - yj - zk$$. If we multiply a quarternion with its conjugate we have: $$qq* = w^2 + x^2 + y^2 + z^2$$. The length or norm of a quarternion is instead defined as:$$N(q) = |q| = \sqrt{qq*} = \sqrt{w^2+x^2+y^2+z^2}$$. Finally for every quarternion, except $q=0$, there is an inverse defined as: $$ q^{-1} = \frac{q*}{|q|^2}$$. The last algebraic operation is the division between two quarternions, which can be obtained by multiplying the first quarternion by the inverse of the second $q_1q_2^{-1}$. A final consideration in this regard is that while complex numbers constitute an algegbraic field, quarternions instead constitute an algebraic body. This is because quarternions for quarternions the commutative property of the product does not hold and therefore $q_1 \times q_2$ is different from $q_2 \times q_1$. 

## Quarternions as a Tool for Calculating the Rotations of a Body around an Arbitrary Axis
According to Euler's theorem, any rotation or sequence of rotations of a rigid body around a fixed point is equivalent to a single rotation of an angle $\theta$ around a certain axis (called Euler axis) passing through this fixed point. 

The Euler axis is normally represented by a unit vector $\hat{u}$. Therefore any rotation in 3 dimensions can be represented as a combination of a unit vector $\hat{u}$ and a scalar value $\theta$.

We therefore can indicate with $R(\theta, p)$ the rotation of a vector $p$ by an angle $\theta$ around the axis indicated by the unit vector $u$m, as we have already seen in the previous article on Euler angles. $$ p_1 = Rp$$. The same rotation can be represented with a Hamilton Quarternion: $$q = q_w + q_x \hat{i}+ q_y \hat{j} + q_z \hat{k}$$ also representable in form $$q = [q_w q_x q_x q_z]^T with
